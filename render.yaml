# Render.com service manifest for Enterprise Automation Agent
# See: https://render.com/docs/manifest

services:
  - type: web
    name: automation-agent
    env: python
    region: oregon
    buildCommand: pip install --upgrade pip && pip install -r requirements.txt
    startCommand: cd app && uvicorn main:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0
      - key: PIP_NO_CACHE_DIR
        value: "1"
      # Add your DB/secret env vars in the Render dashboard (do not commit secrets)
      # - key: DATABASE_URL
      #   value: "postgres://user:pass@host:5432/db"
      # - key: REDIS_URL
      #   value: "redis://..."

# Optional: you can add a separate worker service if you prefer to run background
# workers outside the web dyno. Example (commented out):
#
#services:
#  - type: worker
#    name: enterprise-automation-agent-worker
#    env: python
#    branch: notifier
#    plan: free
#    buildCommand: |
#      python -m pip install --upgrade pip
#      pip install -r requirements.txt
#    startCommand: python -u -m app.workers.processor
#    autoDeploy: true
